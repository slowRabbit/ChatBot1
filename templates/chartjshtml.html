<!DOCTYPE HTML>
<html>
<head>
<title>Live chat analysis</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.4.0/Chart.min.js"></script>
<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.min.js"></script>
<style>

    #graphDiv  {
            width: 50%; 
            margin: 0 auto;
            margin-top: 50px;
            margin-bottom: 50px;
            }

</style>

</head>
<body class="body">

<div id="graphDiv">

<canvas id="myChart" align="cetner"></canvas>
</div>
<script>
var ctx = document.getElementById('myChart').getContext('2d');
var chart = new Chart(ctx, {
    // The type of chart we want to create
    type: 'line',

    // The data for our dataset
    data: {
        labels: ["January", "February", "March", "April", "May", "June", "July", , ],
        datasets: [{
            label: "+ve chats",
            backgroundColor: '#4CAF50',
            borderColor: '#388E3C',
            data: [0, 0, 1.2, 0,0.5, 2.0, 3.8, 5, 2.1, 0.8],
            fill:true,
        },
        {
            label: "-ve chats",
            backgroundColor: '#F44336',
            borderColor: '#D32F2F',
            data: [ 0, -2.2, -0.2, -1.3, -2.2, -1, 0,-0.7, -2.2, 0],
            fill:true,
        }
        
        ]
    },

    // Configuration options go here
    options: {
    
    }
});



 $(document).ready(function() {
  
          //factor_graph_updater()
          console.log("Graph updation Started automatically! ")
          intialDataFetch();
    });
    
    var intialDataFetch = function () {
    console.log("Graph updated initially")
    var updatedData = $.get('/getInitialGraphDataJson');
    updatedData.done(function(results){
        //console.log('Labels :'+results.labels);
        
        //setting label for whole chart
        chart.data.labels = results.labels;
        //for positive chats
        chart.data.datasets[0].data = results.positive_factor_list;
        //for negetive chats
        chart.data.datasets[1].data = results.negetive_factor_list;
        chart.update(1000);
        
    });
    setTimeout(intialDataFetch, 7000);
       };
       

</script>

</body>

</html>